{%- import "src/_mapping.json.j2" as map with context -%}
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .
@prefix ftr: <https://w3id.org/ftr#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix doap: <http://usefulinc.com/ns/doap#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dqv: <http://www.w3.org/ns/dqv#> .
@prefix vivo: <http://vivoweb.org/ontology/core#> .
@prefix dpv: <https://w3id.org/dpv#> .

{% if map.GeneralMap.TitleStripped %}<https://github.com/OSTrails/assessment-component-metadata-records/tree/main/{{map.GeneralMap.valuesTagMap.name}}/{{map.GeneralMap.Abbreviation}}.ttl> a {{ "ftr:Benchmark" if map.GeneralMap.valuesTagMap.name == "benchmark" else "dqv:Metric" if map.GeneralMap.valuesTagMap.name == "metric" else "ftr:Test" if map.GeneralMap.valuesTagMap.name == "test" else "ftr:Algorithm" if map.GeneralMap.valuesTagMap.name == "algorithm" else "dcat:DataService" }} ;{% endif %}
    {% if map.GeneralMap.TitleStripped %}dcterms:identifier <https://github.com/OSTrails/assessment-component-metadata-records/tree/main/{{map.GeneralMap.valuesTagMap.name}}/{{map.GeneralMap.Abbreviation}}.ttl> ;{% endif %}
    {% if map.GeneralMap.Title %}dcterms:title "{{map.GeneralMap.Title}}"^^xsd:string ;
    rdfs:label "{{map.GeneralMap.Title}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.Abbreviation %}vivo:abbreviation "{{map.GeneralMap.Abbreviation}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.Description %}dcterms:description """{{map.GeneralMap.Description}}"""^^xsd:string ;{% endif %}
    {% if map.GeneralMap.valuesKeywordMap %}dcat:keyword {% for key, value in map.GeneralMap.valuesKeywordMap.items() %}"{{value.label}}"{{ "," if not loop.last }}{{"^^xsd:string ;" if loop.last }}{% endfor %}{% endif %}
    {% if map.GeneralMap.valuesThemeMap %}dcat:theme {% for key, value in map.GeneralMap.valuesThemeMap.items() %} <{{value.iri}}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesFAIRPrinciples %}ftr:inDimension {% for item in map.GeneralMap.valuesFAIRPrinciples %}<https://doi.org/{{ item.doi }}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}    
    {% if map.GeneralMap.Version %}dcat:version "{{map.GeneralMap.Version}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.VersionNotes %}adms:versionNotes "{{map.GeneralMap.Abbreviation}}"^^xsd:string ;{% endif %}
    {% if map.GeneralMap.License %}dcterms:license <{{map.GeneralMap.License}}> ;{% endif %}
    ftr:status "Active"@en ;
    {% if map.GeneralMap.EndpointURL %}dcat:endpointURL <{{map.GeneralMap.EndpointURL}}> ;{% endif %}
    {% if map.GeneralMap.EndpointURLDescription %}dcat:endpointDescription <{{map.GeneralMap.EndpointURLDescription}}> ;{% endif %}
    {% if map.GeneralMap.CodeRepository %}doap:repository <{{map.GeneralMap.CodeRepository}}> ;{% endif %}
    {% if map.GeneralMap.valuesToolMap %}ftr:supportedBy {% for key, value in map.GeneralMap.valuesToolMap.items() %} <{{value.url}}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesDigitalObject %}dpv:IsApplicableFor {%- for item in map.GeneralMap.valuesDigitalObject -%} <{{ item.iri }}>{{ "," if not loop.last else ";" }}{%- endfor -%}{% endif %}
    {% if map.GeneralMap.valuesOrganisationMap.url %}dcterms:creator <{{map.GeneralMap.valuesOrganisationMap.url}}>{% endif %} ;
    {% if map.GeneralMap.valuesMetricMap %}ftr:hasAssociatedMetric {% for key, metric in map.GeneralMap.valuesMetricMap.items() %} <https://doi.org/{{ metric.metric_doi }}>{{ "," if not loop.last }}{{ ";" if loop.last }} {% endfor %}{% endif %}
    {% if map.GeneralMap.valuesPersonMap %}{% for key, person in map.GeneralMap.valuesPersonMap.items() %}dcat:contactPoint <https://orcid.org/{{person.person_orcid_code}}> {{ "," if not loop.last }} {{ "." if loop.last }} {% endfor %}{% endif %}
{% if map.GeneralMap.valuesOrganisationMap.url %}
<{{ map.GeneralMap.valuesOrganisationMap.url}}> a vcard:Organisation .
    {% if map.GeneralMap.valuesOrganisationMap.name %}<{{ map.GeneralMap.valuesOrganisationMap.url}}> vcard:organisation-name "{{ map.GeneralMap.valuesOrganisationMap.name }}"^^xsd:string .{% endif %}{% endif %}
{% for key, person in map.GeneralMap.valuesPersonMap.items() %}{% if person.person_orcid_code %}
<https://orcid.org/{{person.person_orcid_code}}> a vcard:Individual ;
    vcard:fn "{{ person.person_orcid_name }}"^^xsd:string ;
    vcard:hasEmail <mailto:{{ person.person_email }}> . {% endif %}{% endfor %}
{% for key, metric in map.GeneralMap.valuesMetricMap.items() %}{% if metric.metric_doi %}
<https://doi.org/{{ metric.metric_doi }}> a dqv:Metric ;
    rdfs:label "{{ metric.metric_name }}"^^xsd:string ;
    dcterms:identifier <https://doi.org/{{ metric.metric_doi }}> . {% endif %}{% endfor %}
{#{{ map.GeneralMap | default({}) |tojson(4) }}#}